Attached you will find my idea what could help to make it easier to write well performing store implementations. The diff move some of the logic of StoreMessageManager to AbstractMessageMapper and change the MessageMapper interface to often just return the uid of the messages in question. The idea was to make it easy for implementations to query only needed data. For example in NoSQL world its usual faster to just query a key then the whole data etc.\\\\Please review :)